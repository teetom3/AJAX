<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Exemple Dog API</title>
  <link rel="stylesheet" href="style1.css">
</head>
<body>
    <div class="main">
        <img class="dog_img" src="" alt="Photo d'un chien" style="height: 300px; width: auto;" >
        <br><br>
        
        <select name="select_race" id="select_race" onchange="handleSelectChange()">
          <option value="">-- Filtrer par prestation --</option>

          
        
        </select>
        <button class="dog">Afficher une image de chien</button>



       
     
    </div>
    <div class="grid_favorite">

    </div>
   


  <script>

   const dogButton = document.querySelector('.dog');
   
   const dogImage = document.querySelector('.dog_img');

  raceSelector = document.querySelector('#select_race');

  const gridFavorite = document.querySelector('.grid_favorite');

    selectedValue = ''
    function handleSelectChange() {
      const selectElement = document.getElementById('select_race');
      selectedValue = selectElement.value;
      
     
      return selectedValue
    }
    fetch('https://dog.ceo/api/breeds/list/all')
      .then(response => response.json())
      .then(data => {
      
        const races = data.message;
        
      
        for (let race in races) {
       
          const option = document.createElement('option');
          option.value = race;
          option.textContent = race;

          
            select_race.appendChild(option);
        }
      })
      .catch(error => {
        console.error('Erreur lors du fetch ', error);
      });
  
   
    
   

    
    dogButton.addEventListener('click', () => {
  fetch(
    selectedValue === "" 
      ? 'https://dog.ceo/api/breeds/image/random' 
      : 'https://dog.ceo/api/breed/' + selectedValue + '/images/random'
  )
    .then(response => response.json())
    .then(data => {
      dogImage.src = data.message;
    })
    .catch(error => {
      console.error('Erreur lors du fetch :', error);
    });
});



dogImage.addEventListener('click', () => {
      
      const favoriteImg = document.createElement('img');
      
      favoriteImg.src = dogImage.src;
      
      gridFavorite.appendChild(favoriteImg);
    });
  </script>
</body>
</html>
